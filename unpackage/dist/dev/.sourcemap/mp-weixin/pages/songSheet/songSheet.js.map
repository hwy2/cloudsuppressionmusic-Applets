{"version":3,"sources":["uni-app:///main.js",null,"webpack:///G:/vue/Applets/cloudsuppressionmusic/pages/songSheet/songSheet.vue?d1ff","webpack:///G:/vue/Applets/cloudsuppressionmusic/pages/songSheet/songSheet.vue?5671","webpack:///G:/vue/Applets/cloudsuppressionmusic/pages/songSheet/songSheet.vue?d667","uni-app:///pages/songSheet/songSheet.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,wG;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,oMAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAAqnB,CAAgB,mnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6DzoB,4D;;;;;;;AAOA;AACA;AACA,4BADA;AAEA,oBAFA;AAGA,4BAHA;AAIA,0BAJA;AAKA,8BALA;AAMA,wBANA,EADA;;AASA,MATA,kBASA;AACA;AACA,qBADA,EACA;AACA,yBAFA,EAEA;AACA,kBAHA,EAGA;AACA,oBAJA,EAIA;AACA,uBALA,EAKA;AACA,aANA,EAMA;AACA,uBAPA,EAOA;AACA,yBARA,EAQA;AACA,oBATA;AAUA,oBAVA;AAWA;AACA;AACA,kBAFA;AAGA,kBAHA,EAXA;;;AAiBA,GA3BA;AA4BA,QA5BA,kBA4BA,OA5BA,EA4BA;AACA;AACA;AACA;AACA;AACA,KAFA;AAGA,GAlCA;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KATA,EAtCA;;AAiDA;AACA;AACA;AACA,SAFA,iBAEA;AACA;AACA,OAJA;AAKA,SALA,eAKA,CALA,EAKA;AACA;AACA;AACA,OARA,EADA,EAjDA;;;AA6DA;AACA;AACA;AACA,uBADA;AAEA,kBAFA;;AAIA;AACA;AACA,8CADA;AAEA,qBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aALA;AAMA,WARA,MAQA;AACA;AACA;AACA,SA3BA;;AA6BA,KApCA;AAqCA;AACA;AACA,kBADA;AAEA,uBAFA;;AAIA;AACA,oBANA,CAMA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA,iBADA;AAEA;AACA;AACA;AACA;AACA;AACA,8CADA;AAEA,qBAFA;AAGA,oBAHA;AAIA;AACA;AACA;AACA,SAPA;AAQA,YARA,kBAQA;AACA;AACA,SAVA;;AAYA,KApEA;AAqEA;AACA;AACA;AACA;AACA,KAzEA;AA0EA;AACA;AACA;AACA,kDADA;AAEA,qBAFA;AAGA;AACA,mCADA,EAHA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBApBA;;AAsBA,WAxBA;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBApBA;;AAsBA;AACA,SAlEA;AAmEA;AACA;AACA,SArEA;;AAuEA,KAnJA;AAoJA;AACA;AACA,iBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CADA;AAEA,qBAFA;AAGA,oBAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,uCADA,CACA;AACA;AACA,SAZA;AAaA;AACA;AACA;AACA;AACA,SAjBA;;AAmBA,KAnLA;AAoLA;AACA;AACA,KAtLA;AAuLA;AACA;AACA,KAzLA;AA0LA;AACA;AACA,kBADA;AAEA,uBAFA;;AAIA;AACA,WADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,MAMA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA,OAfA,MAeA;AACA;AACA;AACA;AACA,SAHA;AAIA;AACA;;AAEA;AACA;AACA;AACA,KApOA;AAqOA;AACA;;AAEA;AACA,sBADA;AAEA,eAFA,mBAEA,GAFA,EAEA;AACA;AACA,mDADA;AAEA;AACA;AACA,mCADA;;AAGA,aANA;AAOA,mCAPA;AAQA,kCARA;;AAUA,SAbA;AAcA,YAdA,gBAcA,GAdA,EAcA;AACA;;AAEA;AACA,qBADA;AAEA,0BAFA;AAGA;AACA;AACA;AACA,2CADA;AAEA,yCAFA;AAGA,wCAHA;;AAKA;AACA,aAXA;;AAaA,SA9BA;;AAgCA,KAxQA;AAyQA,SAzQA,iBAyQA,CAzQA,EAyQA;AACA;AACA;AACA,KA5QA;AA6QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAFA;AAGA;AACA;AACA;AACA;AACA;AACA,WAfA;AAgBA,OAhBA,MAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAFA;AAGA;AACA;AACA;AACA;AACA;AACA,WAfA;AAgBA,OAhBA,MAgBA;AACA;AACA;AACA,KApTA,EA7DA;;AAmXA,SAnXA,qBAmXA;AACA;AACA;AACA,GAtXA,E","file":"pages/songSheet/songSheet.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/songSheet/songSheet.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./songSheet.vue?vue&type=template&id=07e5dd48&\"\nvar renderjs\nimport script from \"./songSheet.vue?vue&type=script&lang=js&\"\nexport * from \"./songSheet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/songSheet/songSheet.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./songSheet.vue?vue&type=template&id=07e5dd48&\"","var components\ntry {\n  components = {\n    hrPullLoad: function() {\n      return import(\n        /* webpackChunkName: \"components/hr-pull-load/hr-pull-load\" */ \"@/components/hr-pull-load/hr-pull-load.vue\"\n      )\n    },\n    uniGrid: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-grid/uni-grid\" */ \"@/components/uni-grid/uni-grid.vue\"\n      )\n    },\n    uniGridItem: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-grid-item/uni-grid-item\" */ \"@/components/uni-grid-item/uni-grid-item.vue\"\n      )\n    },\n    uniDrawer: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-drawer/uni-drawer\" */ \"@/components/uni-drawer/uni-drawer.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.highqualityList, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var f0 = _vm._f(\"retainDoubleDigit\")(item.playCount)\n\n    return {\n      $orig: $orig,\n      f0: f0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./songSheet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./songSheet.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"songSheet\">\r\n\t\t<!-- 顶部导航栏 -->\r\n\t\t<view class=\"navbarSorll\">\r\n\t\t\t<scroll-view scroll-x=\"true\" :scroll-into-view=\"scrollLeft\" scroll-left=\"0\">\r\n\t\t\t\t<view :class=\"{ active: item.activity }\" v-for=\"(item, index) in categoryHot\" :key=\"index\" :id=\"'text' + index\" @click=\"gethighquality(index, item.name)\">\r\n\t\t\t\t\t<text>{{ item.name }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<view class=\"more\"><i class=\"iconfont icongengduo3\" @click=\"openPopup()\"></i></view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 内容区 -->\r\n\t\t<view class=\"sheet\" @touchmove.stop.prevent @touchstart=\"start\" @touchend=\"end\">\r\n\t\t\t<hr-pull-load\r\n\t\t\t\t@refresh=\"refresh\"\r\n\t\t\t\t@loadMore=\"loadMore\"\r\n\t\t\t\t:height=\"-1\"\r\n\t\t\t\t:pullHeight=\"50\"\r\n\t\t\t\t:maxHeight=\"100\"\r\n\t\t\t\t:lowerThreshold=\"200\"\r\n\t\t\t\t:bottomTips=\"bottomTips\"\r\n\t\t\t\t:isAllowPull=\"false\"\r\n\t\t\t\t:isTab=\"false\"\r\n\t\t\t\tref=\"hrPullLoad\"\r\n\t\t\t>\r\n\t\t\t\t<uni-grid :column=\"3\" :show-border=\"false\" :square=\"false\">\r\n\t\t\t\t\t<uni-grid-item v-for=\"(item, index) in highqualityList\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"warp\">\r\n\t\t\t\t\t\t\t<img :src=\"item.coverImgUrl\" mode=\"aspectFit\" @click=\"sheetDetails(item.id)\" />\r\n\t\t\t\t\t\t\t<view class=\"playVolume\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconicon--\">{{ item.playCount | retainDoubleDigit }}</i>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text>{{ item.name }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</uni-grid-item>\r\n\t\t\t\t</uni-grid>\r\n\t\t\t</hr-pull-load>\r\n\t\t</view>\r\n\t\t<!-- 播放区 -->\r\n\t\t<music-playbar v-show=\"isShow\"></music-playbar>\r\n\r\n\t\t<!-- 抽屉 -->\r\n\t\t<uni-drawer :visible=\"true\" :mask=\"true\" :maskClick=\"true\" mode=\"right\" ref=\"draw\" :width=\"260\">\r\n\t\t\t<view class=\"categories-warp\">\r\n\t\t\t\t<scroll-view class=\"bigcategories\" scroll-y=\"false\" scroll-left=\"120\">\r\n\t\t\t\t\t<view class=\"scroll-view-big\" v-for=\"(item, index) in categorieList\" :key=\"index\">\r\n\t\t\t\t\t\t<text class=\"bigText\">{{ item.name }}</text>\r\n\t\t\t\t\t\t<scroll-view class=\"smallcategories\" scroll-y=\"false\" scroll-left=\"120\">\r\n\t\t\t\t\t\t\t<view class=\"scroll-view-small\" v-for=\"(subs, indexs) in item.sub\" :key=\"indexs\">\r\n\t\t\t\t\t\t\t\t<text @click=\"subSelect(subs.name)\">{{ subs.name }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</uni-drawer>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport '@/static/less/songSheet.less';\r\nimport sPullScroll from '@/components/s-pull-scroll/index.vue';\r\nimport uniGrid from '@/components/uni-grid/uni-grid.vue';\r\nimport uniGridItem from '@/components/uni-grid-item/uni-grid-item.vue';\r\nimport hrPullLoad from '@/components/hr-pull-load/hr-pull-load.vue';\r\nimport musicPlaybar from '@/components/musicPlayBar/musicPlayBar.vue';\r\nimport uniDrawer from '@/components/uni-drawer/uni-drawer.vue';\r\nexport default {\r\n\tcomponents: {\r\n\t\tsPullScroll,\r\n\t\tuniGrid,\r\n\t\tuniGridItem,\r\n\t\thrPullLoad,\r\n\t\tmusicPlaybar,\r\n\t\tuniDrawer\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcategoryHot: [], //热门标签\r\n\t\t\thighqualityList: [], //歌单列表\r\n\t\t\tcategory: '', //标签\r\n\t\t\tsongListId: '', //歌单ID\r\n\t\t\tcategorieList: [], //标签列表\r\n\t\t\tpage: 1, //页码\r\n\t\t\tsongSheetType: '', //歌单类别\r\n\t\t\tnavbarWidth: '100%', //歌单类别导航长度\r\n\t\t\tbottomTips: '',\r\n\t\t\tscrollLeft: '',\r\n\t\t\tstartData: {\r\n\t\t\t\t//滑动偏移量\r\n\t\t\t\tclientX: 0,\r\n\t\t\t\tclientY: 0\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonLoad(options) {\r\n\t\tconst eventChannel = this.getOpenerEventChannel();\r\n\t\tlet that = this;\r\n\t\teventChannel.once('songSheet', function(params) {\r\n\t\t\tthat.songSheetType = params.songSheetType;\r\n\t\t});\r\n\t},\r\n\t// onUnload() {\r\n\t// \tthis.eventChannel.off('songSheet');\r\n\t// },\r\n\tfilters: {\r\n\t\t//拦截器\r\n\t\tretainDoubleDigit: function(data) {\r\n\t\t\t// 将数据转万\r\n\t\t\tif (data > 100000000) {\r\n\t\t\t\treturn (data / 100000000).toFixed(2) + '亿';\r\n\t\t\t} else {\r\n\t\t\t\treturn (data / 10000).toFixed(2) + '万';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tisShow: {\r\n\t\t\t//播放状态\r\n\t\t\tget() {\r\n\t\t\t\treturn this.$store.state.isShow;\r\n\t\t\t},\r\n\t\t\tset(v) {\r\n\t\t\t\t// 使用vuex中的mutations中定义好的方法来改变\r\n\t\t\t\tthis.$store.commit('setisShow', v);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetcategoryHot: function() {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...',\r\n\t\t\t\tmask: true\r\n\t\t\t});\r\n\t\t\tlet that = this;\r\n\t\t\tuni.request({\r\n\t\t\t\turl: 'https://wx.3dcw.cn/playlist/hot',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tthat.categoryHot = res.data.tags;\r\n\t\t\t\t\t//添加推荐标签\r\n\t\t\t\t\tlet arr2 = {};\r\n\t\t\t\t\tarr2['activity'] = false;\r\n\t\t\t\t\tarr2['name'] = '官方';\r\n\t\t\t\t\tthat.categoryHot.unshift(arr2);\r\n\t\t\t\t\tlet arr = {};\r\n\t\t\t\t\tarr['activity'] = false;\r\n\t\t\t\t\tarr['name'] = '推荐';\r\n\t\t\t\t\tthat.categoryHot.unshift(arr);\r\n\t\t\t\t\tthat.navbarWidth = 22 * (that.categoryHot.length + 1) + '%';\r\n\r\n\t\t\t\t\tif (that.songSheetType !== '') {\r\n\t\t\t\t\t\tthat.categoryHot[0].activity = false;\r\n\t\t\t\t\t\tthat.categoryHot.forEach((item, index) => {\r\n\t\t\t\t\t\t\tif (item.name === that.songSheetType) {\r\n\t\t\t\t\t\t\t\titem.activity = true;\r\n\t\t\t\t\t\t\t\tthat.gethighquality(index, that.songSheetType);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.gethighquality(0, '');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgethighquality: function(index, category) {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\tmask: true,\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t});\r\n\t\t\tthis.highqualityList = [];\r\n\t\t\tthis.page = 1; //重新初始化\r\n\t\t\t//获取精品歌单\r\n\t\t\tthis.categoryHot.forEach(function(obj) {\r\n\t\t\t\tobj.activity = false;\r\n\t\t\t});\r\n\t\t\tthis.categoryHot[index].activity = true;\r\n\t\t\tthis.category = category;\r\n\t\t\tlet params = {},\r\n\t\t\t\tthat = this;\r\n\t\t\tparams['limit'] = 21;\r\n\t\t\tif (category != '' && category != '推荐') {\r\n\t\t\t\tparams['cat'] = category;\r\n\t\t\t}\r\n\t\t\tuni.request({\r\n\t\t\t\turl: 'https://wx.3dcw.cn/top/playlist',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: params,\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tthat.highqualityList = res.data.playlists;\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//自定义上拉加载更多\r\n\t\tloadMore: function() {\r\n\t\t\tthis.bottomTips = 'loading';\r\n\t\t\tthis.getExampleData();\r\n\t\t},\r\n\t\tgetcategory: function() {\r\n\t\t\tlet that = this;\r\n\t\t\tuni.request({\r\n\t\t\t\turl: 'https://wx.3dcw.cn/playlist/catlist',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tt: Date.parse(new Date())\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t// let \"语种\",\"风格\",\"场景\",\"情感\",\"主题\"\r\n\t\t\t\t\tlet languages = [];\r\n\t\t\t\t\tlet style = [];\r\n\t\t\t\t\tlet scene = [];\r\n\t\t\t\t\tlet emotion = [];\r\n\t\t\t\t\tlet themes = [];\r\n\r\n\t\t\t\t\t//小类\r\n\t\t\t\t\tres.data.sub.forEach(item => {\r\n\t\t\t\t\t\tvar arr = {};\r\n\t\t\t\t\t\tswitch (item.category) {\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\tarr['name'] = item.name;\r\n\t\t\t\t\t\t\t\tlanguages.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\tarr['name'] = item.name;\r\n\t\t\t\t\t\t\t\tstyle.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\tarr['name'] = item.name;\r\n\t\t\t\t\t\t\t\tscene.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\tarr['name'] = item.name;\r\n\t\t\t\t\t\t\t\temotion.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\tarr['name'] = item.name;\r\n\t\t\t\t\t\t\t\tthemes.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//大类\r\n\t\t\t\t\tfor (let a = 0; a < 5; a++) {\r\n\t\t\t\t\t\tvar arr = [];\r\n\t\t\t\t\t\tswitch (a) {\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\tarr = { name: '语种', sub: languages };\r\n\t\t\t\t\t\t\t\tthat.categorieList.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\tarr = { name: '风格', sub: style };\r\n\t\t\t\t\t\t\t\tthat.categorieList.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\tarr = { name: '场景', sub: scene };\r\n\t\t\t\t\t\t\t\tthat.categorieList.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\tarr = { name: '情感', sub: emotion };\r\n\t\t\t\t\t\t\t\tthat.categorieList.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\tarr = { name: '主题', sub: themes };\r\n\t\t\t\t\t\t\t\tthat.categorieList.push(arr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: function(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetExampleData: function() {\r\n\t\t\tlet params = {},\r\n\t\t\t\tthat = this;\r\n\t\t\tthis.page++;\r\n\t\t\t// let last = this.highqualityList.pop();\r\n\t\t\tparams['limit'] = 21;\r\n\t\t\tif (this.category != '' && this.category != '推荐') {\r\n\t\t\t\tparams['cat'] = this.category;\r\n\t\t\t}\r\n\t\t\tparams['offset'] = (this.page - 1) * 21;\r\n\t\t\tparams['t'] = Date.parse(new Date());\r\n\r\n\t\t\tuni.request({\r\n\t\t\t\turl: 'https://wx.3dcw.cn/top/playlist',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: params,\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tlet temporary = that.highqualityList;\r\n\t\t\t\t\tlet playlists = res.data.playlists;\r\n\t\t\t\t\tthat.highqualityList = [...temporary, ...playlists];\r\n\t\t\t\t\tthat.bottomTips = '';\r\n\t\t\t\t\tif (!res.data.more) {\r\n\t\t\t\t\t\tthat.bottomTips = 'nomore'; // 若数据已全部获取完毕\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: function(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tthat.$refs.hrPullLoad.reSet();\r\n\t\t\t\t\tthat.bottomTips = '';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\topenPopup: function() {\r\n\t\t\tthis.$refs.draw.open();\r\n\t\t},\r\n\t\tclosePopup: function() {\r\n\t\t\tthis.$refs.draw.close();\r\n\t\t},\r\n\t\tsubSelect: function(name) {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\tmask: true,\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t});\r\n\t\t\tlet checkTag = 0,\r\n\t\t\t\ti = 0;\r\n\t\t\t//检查已有标签是否有当前选择的标签\r\n\t\t\twhile (i < this.categoryHot.length) {\r\n\t\t\t\tif (this.categoryHot[i].name === name) {\r\n\t\t\t\t\tcheckTag = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\t\t\tif (!checkTag) {\r\n\t\t\t\t//添加标签\r\n\t\t\t\tif (this.categoryHot[0].name === '推荐') {\r\n\t\t\t\t\tlet arr2 = {};\r\n\t\t\t\t\tarr2['activity'] = true;\r\n\t\t\t\t\tarr2['name'] = name;\r\n\t\t\t\t\tthis.categoryHot[0].activity = false;\r\n\t\t\t\t\tthis.categoryHot.unshift(arr2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.categoryHot[0].name = name;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthis.scrollLeft = 'text' + checkTag;\r\n\t\t\t\t});\r\n\t\t\t\tthis.scrollLeft = '';\r\n\t\t\t} else {\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthis.scrollLeft = 'text' + checkTag;\r\n\t\t\t\t\tconsole.log(this.scrollLeft);\r\n\t\t\t\t});\r\n\t\t\t\tthis.scrollLeft = '';\r\n\t\t\t}\r\n\r\n\t\t\tthis.page == 1;\r\n\t\t\tthis.gethighquality(checkTag, name);\r\n\t\t\tthis.closePopup();\r\n\t\t},\r\n\t\tsheetDetails: function(sheetID) {\r\n\t\t\tconsole.log(sheetID);\r\n\r\n\t\t\tuni.getStorage({\r\n\t\t\t\tkey: 'profile',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/sheetDetails/sheetDetails',\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tres.eventChannel.emit('sheetDetails', {\r\n\t\t\t\t\t\t\t\tsongListId: sheetID\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tanimationType: 'pop-in',\r\n\t\t\t\t\t\tanimationDuration: 200\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '',\r\n\t\t\t\t\t\tcontent: '请登录',\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/login/login',\r\n\t\t\t\t\t\t\t\t\tanimationType: 'pop-in',\r\n\t\t\t\t\t\t\t\t\tanimationDuration: 200\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tstart(e) {\r\n\t\t\tthis.startData.clientX = e.changedTouches[0].clientX;\r\n\t\t\tthis.startData.clientY = e.changedTouches[0].clientY;\r\n\t\t},\r\n\t\tend: function(e) {\r\n\t\t\t// console.log(e)\r\n\t\t\tconst subX = e.changedTouches[0].clientX - this.startData.clientX;\r\n\t\t\tconst subY = e.changedTouches[0].clientY - this.startData.clientY;\r\n\t\t\tif (subX > 50) {\r\n\t\t\t\tconsole.log('右滑');\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\twhile (i < this.categoryHot.length) {\r\n\t\t\t\t\tif (this.categoryHot[i].activity && i <= this.categoryHot.length - 1 && i - 1 >= 0) {\r\n\t\t\t\t\t\tthis.categoryHot[i].activity = false;\r\n\t\t\t\t\t\tthis.categoryHot[i - 1].activity = true;\r\n\t\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\t\tthis.scrollLeft = 'text' + (i - 1);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.scrollLeft = '';\r\n\t\t\t\t\t\tthis.gethighquality(i - 1, this.categoryHot[i - 1].name);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t} else if (subX < -50) {\r\n\t\t\t\tconsole.log('左滑');\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\twhile (i < this.categoryHot.length) {\r\n\t\t\t\t\tif (this.categoryHot[i].activity && i <= this.categoryHot.length - 1 && i + 1 <= this.categoryHot.length - 1) {\r\n\t\t\t\t\t\tthis.categoryHot[i].activity = false;\r\n\t\t\t\t\t\tthis.categoryHot[i + 1].activity = true;\r\n\t\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\t\tthis.scrollLeft = 'text' + (i + 1);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.scrollLeft = '';\r\n\t\t\t\t\t\tthis.gethighquality(i + 1, this.categoryHot[i + 1].name);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('无效');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getcategoryHot();\r\n\t\tthis.getcategory();\r\n\t}\r\n};\r\n</script>\r\n\r\n<style></style>\n"],"sourceRoot":""}